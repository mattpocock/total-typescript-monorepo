<style>
.shiki {
  --tw-bg-opacity: 1 !important;
  background-color: rgb(17 24 39 / var(--tw-bg-opacity)) !important;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 1.5rem;
  padding-bottom: 1.5rem;
  font-size: 1rem;
  line-height: 1.5rem;
}

pre {
  overflow-x: auto;
  position: relative;
}

pre.shiki {
  overflow-x: auto;
}

pre.shiki div.dim {
  opacity: 0.5;
}

pre.shiki div.dim,
pre.shiki div.highlight {
  margin: 0;
  padding: 0;
}

pre.shiki div.highlight {
  opacity: 1;
  background-color: #f1f8ff;
}

pre.shiki div.line {
  min-height: 1rem;
}

pre.shiki .language-id {
  display: none;
}

pre .code-container {
  overflow: auto;
}

pre code {
  font-family: 'JetBrains Mono', Menlo, Monaco, Consolas, Courier New, monospace;
  white-space: pre;
  -webkit-overflow-scrolling: touch;
}

pre code a {
  text-decoration: none;
}

pre data-err {
  /* Extracted from VS Code */
  background: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23c94824'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E")
    repeat-x bottom left;
  padding-bottom: 3px;
}

pre .query {
  margin-bottom: 10px;
  color: #137998;
  display: inline-block;
}

pre .error,
pre .error-behind {
  margin-left: -14px;
  margin-top: 8px;
  margin-bottom: 4px;
  padding: 6px;
  padding-left: 14px;
  padding-right: 14px;
  white-space: pre-wrap;
  display: block;
  max-width: 42rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
}

pre .error {
  --tw-bg-opacity: 1;
  background-color: rgb(31 41 55 / var(--tw-bg-opacity));
  --tw-text-opacity: 1;
  color: rgb(254 242 242 / var(--tw-text-opacity));
  position: absolute;
  border-left: 4px solid #bf1818;
  /* Give the space to the error code */
  display: flex;
  align-items: center;
}

pre .error .code {
  display: none;
}

pre .error-behind {
  -webkit-user-select: none;
     -moz-user-select: none;
          user-select: none;
  visibility: transparent;
  color: transparent;
}

/* Queries */

pre .arrow {
  /* Transparent background */
  --tw-bg-opacity: 1;
  background-color: rgb(31 41 55 / var(--tw-bg-opacity));
  position: relative;
  top: -7px;
  margin-left: 0.1rem;
  /* Edges */
  border-left: 1px solid rgb(51, 65, 85);
  border-top: 1px solid rgb(51, 65, 85);
  transform: translateY(25%) rotate(45deg);
  /* Size */
  height: 8px;
  width: 8px;
}

pre .popover {
  --tw-bg-opacity: 1;
  background-color: rgb(31 41 55 / var(--tw-bg-opacity));
  --tw-text-opacity: 1;
  color: rgb(243 244 246 / var(--tw-text-opacity));
  margin-bottom: 10px;
  display: inline-block;
  padding: 0 0.5rem 0.3rem;
  margin-top: 10px;
  border-radius: 3px;
  max-width: 42rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
}

/* Completion */

pre .inline-completions ul.dropdown {
  display: inline-block;
  position: absolute;
  width: 240px;
  background-color: gainsboro;
  color: grey;
  padding-top: 4px;
  font-family: var(--code-font);
  font-size: 0.8rem;
  margin: 0;
  padding: 0;
  border-left: 4px solid #4b9edd;
}

pre .inline-completions ul.dropdown::before {
  background-color: #4b9edd;
  width: 2px;
  position: absolute;
  top: -1.2rem;
  left: -3px;
  content: ' ';
}

pre .inline-completions ul.dropdown li {
  overflow-x: hidden;
  padding-left: 4px;
  margin-bottom: 4px;
}

pre .inline-completions ul.dropdown li.deprecated {
  text-decoration: line-through;
}

pre .inline-completions ul.dropdown li span.result-found {
  color: #4b9edd;
}

pre .inline-completions ul.dropdown li span.result {
  width: 100px;
  color: black;
  display: inline-block;
}

.dark-theme .markdown pre {
  background-color: #d8d8d8;
  border-color: #ddd;
  filter: invert(98%) hue-rotate(180deg);
}

data-lsp {
  /* Fades in unobtrusively */
  transition-timing-function: ease;
  transition: border-color 0.3s;
}

/** Annotations support, providing a tool for meta commentary */

.tag-container {
  position: relative;
}

.tag-container .twoslash-annotation {
  position: absolute;
  font-family: 'JetBrains Mono', Menlo, Monaco, Consolas, Courier New, monospace;
  right: -10px;
  /** Default annotation text to 200px */
  width: 200px;
  color: #187abf;
  background-color: #fcf3d9 bb;
}

.tag-container .twoslash-annotation p {
  text-align: left;
  font-size: 0.8rem;
  line-height: 0.9rem;
}

.tag-container .twoslash-annotation svg {
  float: left;
  margin-left: -44px;
}

.tag-container .twoslash-annotation.left {
  right: auto;
  left: -200px;
}

.tag-container .twoslash-annotation.left svg {
  float: right;
  margin-right: -5px;
}

/** Support for showing console log/warn/errors inline */

pre .logger {
  display: flex;
  align-items: center;
  color: black;
  padding: 6px;
  padding-left: 8px;
  width: calc(100% - 19px);
  white-space: pre-wrap;
}

pre .logger svg {
  margin-right: 9px;
}

pre .logger.error-log {
  --tw-bg-opacity: 1;
  background-color: rgb(31 41 55 / var(--tw-bg-opacity));
  border-left: 4px solid #bf1818;
}

pre .logger.warn-log {
  background-color: #ffe;
  border-left: 4px solid #eae662;
}

pre .logger.log-log {
  background-color: #e9e9e9;
  border-left: 4px solid #ababab;
}

pre .logger.log-log svg {
  margin-left: 6px;
  margin-right: 9px;
}
</style>
<h1>Going deep on generic types: constraints and defaults</h1>
<p>In our last lesson, we introduced the concept of a generic type. But you might have noticed something interesting: in our <code>Maybe</code> type, you can pass <em>any</em> type to it:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Maybe<T> = T | null | undefined">Maybe</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Maybe<T>">T</data-lsp></span><span style="color:#D4D4D4">> = </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Maybe<T>">T</data-lsp></span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">null</span><span style="color:#D4D4D4"> | </span><span style="color:#4EC9B0">undefined</span><span style="color:#D4D4D4">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type MaybeString = string | null | undefined">MaybeString</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Maybe<T> = T | null | undefined">Maybe</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type MaybeNumber = number | null | undefined">MaybeNumber</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Maybe<T> = T | null | undefined">Maybe</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type MaybeBoolean = boolean | null | undefined">MaybeBoolean</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Maybe<T> = T | null | undefined">Maybe</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">boolean</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"></span></code></pre>
<p>What if you wanted to only allow certain types to be passed?</p>
<h2>Type Parameter Constraints</h2>
<p>Let's set up a new example. Error handling in JavaScript can be a bit of a pain. Throwing errors inside a <code>try</code>/<code>catch</code> block can lead to your errors being typed as <code>unknown</code>:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="const mightFail: () => string">mightFail</data-lsp></span><span style="color:#D4D4D4"> = () </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><data-lsp lsp="var Math: Math">Math</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Math.random(): number">random</data-lsp></span><span style="color:#D4D4D4">() > </span><span style="color:#B5CEA8">0.5</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">    throw</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="var Error: ErrorConstructor
new (message?: string | undefined, options?: ErrorOptions | undefined) => Error (+1 overload)">Error</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">"Failed!"</span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#CE9178"> "Success!"</span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">try</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#569CD6">  const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><data-lsp lsp="const result: string">result</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA"><data-lsp lsp="const mightFail: () => string">mightFail</data-lsp></span><span style="color:#D4D4D4">();</span></span>
<span class="line"><span style="color:#D4D4D4">} </span><span style="color:#C586C0">catch</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><data-lsp lsp="var error: unknown">error</data-lsp></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#6A9955">  // error is typed as unknown</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-err>error</data-err></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="any">message</data-lsp></span><span style="color:#D4D4D4">);</span></span><div class="error"><span>'error' is of type 'unknown'.</span><span class="code">18046</span></div><span class="error-behind">'error' is of type 'unknown'.</span><span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span></code></pre>
<p>A different way of thinking about errors is to use a <code>Result</code> type, which can either return a success or an error:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError>">T</data-lsp></span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError>">TError</data-lsp></span><span style="color:#D4D4D4">> =</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: true">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">true</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) value: T">value</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError>">T</data-lsp></span><span style="color:#D4D4D4"> }</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: false">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">false</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) error: TError">error</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError>">TError</data-lsp></span><span style="color:#D4D4D4"> };</span></span>
<span class="line"></span></code></pre>
<p>We've got <em>two</em> type parameters here (yes, generic types can have more than one type parameter). The first is the type of the successful value, and the second is the type of the error.</p>
<p>To use this on our <code>mightFail</code> function, we can pass in the types we expect:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">const</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="const mightFail: () => Result<string, Error>">mightFail</data-lsp></span><span style="color:#D4D4D4"> = (): </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0"><data-lsp lsp="interface Error">Error</data-lsp></span><span style="color:#D4D4D4">> </span><span style="color:#569CD6">=></span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#C586C0">  if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><data-lsp lsp="var Math: Math">Math</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Math.random(): number">random</data-lsp></span><span style="color:#D4D4D4">() > </span><span style="color:#B5CEA8">0.5</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">    return</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: false">success</data-lsp></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> false</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><data-lsp lsp="(property) error: Error">error</data-lsp></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> new</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="var Error: ErrorConstructor
new (message?: string | undefined, options?: ErrorOptions | undefined) => Error (+1 overload)">Error</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#CE9178">"Failed!"</span><span style="color:#D4D4D4">) };</span></span>
<span class="line"><span style="color:#D4D4D4">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: true">success</data-lsp></span><span style="color:#9CDCFE">:</span><span style="color:#569CD6"> true</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><data-lsp lsp="(property) value: string">value</data-lsp></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "Success!"</span><span style="color:#D4D4D4"> };</span></span>
<span class="line"><span style="color:#D4D4D4">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">const</span><span style="color:#4FC1FF"> </span><span style="color:#4FC1FF"><data-lsp lsp="const result: Result<string, Error>">result</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#DCDCAA"><data-lsp lsp="const mightFail: () => Result<string, Error>">mightFail</data-lsp></span><span style="color:#D4D4D4">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0">if</span><span style="color:#D4D4D4"> (</span><span style="color:#9CDCFE"><data-lsp lsp="const result: Result<string, Error>">result</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: boolean">success</data-lsp></span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-lsp lsp="const result: {
    success: true;
    value: string;
}">result</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="(property) value: string">value</data-lsp></span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">} </span><span style="color:#C586C0">else</span><span style="color:#D4D4D4"> {</span></span>
<span class="line"><span style="color:#6A9955">  // result.error is strongly typed!</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-lsp lsp="const result: {
    success: false;
    error: Error;
}">result</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="(property) error: Error">error</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="(property) Error.message: string">message</data-lsp></span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span></code></pre>
<p>This is a great way to handle errors in a more type-safe way. But there's a funny problem - we can pass <em>anything</em> into <code>TError</code>:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example1 = {
    success: true;
    value: string;
} | {
    success: false;
    error: string;
}">Example1</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example2 = {
    success: true;
    value: string;
} | {
    success: false;
    error: number;
}">Example2</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example3 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
    };
}">Example3</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> }>;</span></span>
<span class="line"></span></code></pre>
<p>We want our <code>TError</code> to be a bit stricter. We want to make sure that any error thrown is an object with a <code>message</code> property, so we know what went wrong.</p>
<p>We can do this by adding a constraint to our <code>TError</code> type:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError extends { message: string; }>">T</data-lsp></span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError extends { message: string; }>">TError</data-lsp></span><span style="color:#569CD6"> extends</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> }> =</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: true">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">true</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) value: T">value</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError extends { message: string; }>">T</data-lsp></span><span style="color:#D4D4D4"> }</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: false">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">false</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) error: TError extends { message: string; }">error</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError extends { message: string; }>">TError</data-lsp></span><span style="color:#D4D4D4"> };</span></span>
<span class="line"></span></code></pre>
<p>The <code>extends</code> keyword after <code>TError</code> is the <em>constraint</em>. It makes sure that any type passed in must have a <code>message</code> property.</p>
<p>Now, if we try to pass in a type that doesn't have a <code>message</code> property, we'll get an error:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example1 = {
    success: true;
    value: string;
} | {
    success: false;
    error: string;
}">Example1</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#4EC9B0"><data-err>string</data-err></span><span style="color:#D4D4D4">>;</span></span><div class="error"><span>Type 'string' does not satisfy the constraint '{ message: string; }'.</span><span class="code">2344</span></div><span class="error-behind">Type 'string' does not satisfy the constraint '{ message: string; }'.</span><span class="line"></span></code></pre>
<h2>Constraints Let You Pass Excess Properties</h2>
<p>So far, we've been using the metaphor of 'functions' to describe generic types. Our <code>extends</code> constraint is kind of like a typed function parameter: restricting what can be passed to the type.</p>
<p>But there's a key difference between constraints and function parameters: constraints let you pass excess properties in the argument.</p>
<p>In our <code>Result</code> type, we can pass in any type that has a <code>message</code> property. But we can also pass in types that have <em>more</em> properties:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example1 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
    };
}">Example1</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> }>;</span></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example2 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
        code: number;
    };
}">Example2</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span></span>
<span class="line"><span style="color:#4EC9B0">  string</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">  { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) code: number">code</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> }</span></span>
<span class="line"><span style="color:#D4D4D4">>;</span></span>
<span class="line"></span></code></pre>
<p>In a function, we'd get an error in this situation:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="function example(param: {
    message: string;
}): void">example</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) param: {
    message: string;
}">param</data-lsp></span><span style="color:#D4D4D4">: { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> }) {</span></span>
<span class="line"><span style="color:#9CDCFE">  </span><span style="color:#9CDCFE"><data-lsp lsp="var console: Console">console</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#DCDCAA"><data-lsp lsp="(method) Console.log(...data: any[]): void">log</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) param: {
    message: string;
}">param</data-lsp></span><span style="color:#D4D4D4">.</span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">);</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA"><data-lsp lsp="function example(param: {
    message: string;
}): void">example</data-lsp></span><span style="color:#D4D4D4">({ </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#9CDCFE">:</span><span style="color:#CE9178"> "Hello"</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><data-err>code</data-err></span><span style="color:#9CDCFE">:</span><span style="color:#B5CEA8"> 42</span><span style="color:#D4D4D4"> });</span></span><div class="error"><span>Object literal may only specify known properties, and 'code' does not exist in type '{ message: string; }'.</span><span class="code">2353</span></div><span class="error-behind">Object literal may only specify known properties, and 'code' does not exist in type '{ message: string; }'.</span><span class="line"></span></code></pre>
<p>That's because constraints act as a <em>minimal specification</em> for the type passed in. As long as it's assignable to the constraint, it's allowed.</p>
<p>For instance, we could pass in a type that has a <em>specific</em> <code>message</code> string:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example3 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: &#x22;Error&#x22;;
    };
}">Example3</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: &#x22;Error&#x22;">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#CE9178">"Error"</span><span style="color:#D4D4D4"> }>;</span></span>
<span class="line"></span></code></pre>
<p>But not a type that has a <code>message</code> property that's <em>not</em> a string:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example4 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: number;
    };
}">Example4</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">, </span><span style="color:#D4D4D4"><data-err>{ </data-err></span><span style="color:#9CDCFE"><data-err>message</data-err></span><span style="color:#D4D4D4"><data-err>: </data-err></span><span style="color:#4EC9B0"><data-err>number</data-err></span><span style="color:#D4D4D4"><data-err> }</data-err></span><span style="color:#D4D4D4">>;</span></span><div class="error"><span>Type '{ message: number; }' does not satisfy the constraint '{ message: string; }'.
  Types of property 'message' are incompatible.
    Type 'number' is not assignable to type 'string'.</span><span class="code">2344</span></div><span class="error-behind">Type '{ message: number; }' does not satisfy the constraint '{ message: string; }'.
  Types of property 'message' are incompatible.
    Type 'number' is not assignable to type 'string'.</span><span class="line"></span></code></pre>
<p>This means that our <code>Result</code> type will output exactly the type passed in, even if it's constrained:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example5 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
        code: number;
    };
}">Example5</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; }> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span></span>
<span class="line"><span style="color:#4EC9B0">  string</span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">  { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) code: number">code</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4"> }</span></span>
<span class="line"><span style="color:#D4D4D4">>;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Show = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
        code: number;
    };
}">Show</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Example5 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
        code: number;
    };
}">Example5</data-lsp></span><span style="color:#D4D4D4">;</span></span><div class="meta-line">               <span class="popover"><div class="arrow"></div>type Example5 = {
    success: true;
    value: string;
} | {
    success: false;
    error: {
        message: string;
        code: number;
    };
}</span></div><span class="line"></span></code></pre>
<p>Note that I've slightly simplified how functions work in my explanation above. To deepen your understanding of the excess properties error, check out the section in <a href="https://github.com/total-typescript/total-typescript-book/blob/main/book-content/chapters/12-the-weird-parts.md#excess-property-warnings">my book</a>.</p>
<h2>Default Type Parameters</h2>
<p>We know that in runtime functions, you can add default values to parameters:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">function</span><span style="color:#DCDCAA"> </span><span style="color:#DCDCAA"><data-lsp lsp="function add(a: number, b?: number): number">add</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) a: number">a</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">number</span><span style="color:#D4D4D4">, </span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) b: number">b</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#B5CEA8">5</span><span style="color:#D4D4D4">) {</span></span>
<span class="line"><span style="color:#C586C0">  return</span><span style="color:#9CDCFE"> </span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) a: number">a</data-lsp></span><span style="color:#D4D4D4"> + </span><span style="color:#9CDCFE"><data-lsp lsp="(parameter) b: number">b</data-lsp></span><span style="color:#D4D4D4">;</span></span>
<span class="line"><span style="color:#D4D4D4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA"><data-lsp lsp="function add(a: number, b?: number): number">add</data-lsp></span><span style="color:#D4D4D4">(</span><span style="color:#B5CEA8">5</span><span style="color:#D4D4D4">); </span><span style="color:#6A9955">// 10</span></span>
<span class="line"></span></code></pre>
<p>The same is true in generic types! Let's imagine that when we didn't pass in a <code>TError</code> type, we wanted to default to <code>Error</code>. We can do this with a default type parameter:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; } = Error> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span></span>
<span class="line"><span style="color:#4EC9B0">  </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError extends { message: string; } = Error>">T</data-lsp></span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#4EC9B0">  </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError extends { message: string; } = Error>">TError</data-lsp></span><span style="color:#569CD6"> extends</span><span style="color:#D4D4D4"> { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) message: string">message</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4"> } = </span><span style="color:#4EC9B0"><data-lsp lsp="interface Error">Error</data-lsp></span><span style="color:#D4D4D4">,</span></span>
<span class="line"><span style="color:#D4D4D4">> =</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: true">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">true</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) value: T">value</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) T in type Result<T, TError extends { message: string; } = Error>">T</data-lsp></span><span style="color:#D4D4D4"> }</span></span>
<span class="line"><span style="color:#D4D4D4">  | { </span><span style="color:#9CDCFE"><data-lsp lsp="(property) success: false">success</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0">false</span><span style="color:#D4D4D4">; </span><span style="color:#9CDCFE"><data-lsp lsp="(property) error: TError extends { message: string; } = Error">error</data-lsp></span><span style="color:#D4D4D4">: </span><span style="color:#4EC9B0"><data-lsp lsp="(type parameter) TError in type Result<T, TError extends { message: string; } = Error>">TError</data-lsp></span><span style="color:#D4D4D4"> };</span></span>
<span class="line"></span></code></pre>
<p>Now, if we don't pass in a <code>TError</code> type, it will default to <code>Error</code>:</p>
<pre class="shiki dark-plus twoslash lsp not-prose" style="background-color:#1E1E1E;color:#D4D4D4" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#569CD6">type</span><span style="color:#4EC9B0"> </span><span style="color:#4EC9B0"><data-lsp lsp="type Example1 = {
    success: true;
    value: string;
} | {
    success: false;
    error: Error;
}">Example1</data-lsp></span><span style="color:#D4D4D4"> = </span><span style="color:#4EC9B0"><data-lsp lsp="type Result<T, TError extends { message: string; } = Error> = {
    success: true;
    value: T;
} | {
    success: false;
    error: TError;
}">Result</data-lsp></span><span style="color:#D4D4D4">&#x3C;</span><span style="color:#4EC9B0">string</span><span style="color:#D4D4D4">>;</span></span>
<span class="line"><span style="color:#6A9955">// { success: true; value: string } | { success: false; error: Error }</span></span>
<span class="line"></span></code></pre>
<p>This is a great way to make your generic types more flexible, and to reduce the amount of boilerplate you have to write.</p>
<h2>Summary</h2>
<ul>
<li>You can constrain type parameters in generic types with the <code>extends</code> keyword.</li>
<li>Constraints act as a minimal specification for the type passed in, allowing excess properties.</li>
<li>You can set default type parameters in generic types, just like you can with function parameters.</li>
</ul>
<p>In the next lesson, we'll start our examination of generic functions by seeing how generic functions really are <em>everywhere</em> - even if we're not writing them ourselves.</p>
<p>Want to get the next lesson now? Click the link below.</p>