https://code.lol/post/programming/self-modifying-type-predicates/
